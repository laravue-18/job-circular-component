<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Circular Component</title>

  <link rel="stylesheet" href="font.css">

  <style>
    .luka-circular-component {
      width: 500px;
      height: 500px;
      position: relative;
    }
    .luka-circular-component .center-content {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 284px;
      height: 284px;
      border-radius: 50%;
      /* background: linear-gradient(205.41deg, #BE6786 30.27%, #994277 76.81%); */
      background: url(./assets/center.png);

    }
  </style>
</head>
<body>
  <div class="luka-circular-component">
    <canvas id="lukaCircularCanvas" width="500" height="500" style="border:1px solid #ccc;"></canvas>
    <div class="center-content"></div>
  </div>

<script>

  const cx = 250, cy = 250;
  const outerRadius = 232;
  const outerThickness = 12;
  const outerAnglePerChar = 11 / 230;
  const outerStrings = ['HR & Team', 'Akademie', 'Labor', 'Abrechnung', 'Praxisausstattung', 'Finanzierung', 'Bewerbungsmanagement'];
  const outerArcAngle = 78 / 230;

  const baseRadius = 210;
  const thickness = 60;
  const offset = 4;
  const anglePerChar = 10 / 180; // font-size(width) / radius
  
  const arcs = [
    {
      start: Math.PI * 0 / 6,
      end: Math.PI * 2.95 / 6,
      color: '#E9A2AB',
      hoverColor: '#FF6666',
      isHover: false,
      text: "Mitarbeiter schulen"
    },
    {
      start: Math.PI * 3 / 6,
      end: Math.PI * 5.95 / 6,
      color: '#DD8E98',
      hoverColor: '#FF6666',
      isHover: false,
      text: 'Buchha I tung und Finanzen'
    },
    {
      start: Math.PI * 6 / 6,
      end: Math.PI * 8.95 / 6,
      color: '#E77584',
      hoverColor: '#66FFDD',
      isHover: false,
      text: 'Marketing & Patientenakquise'
    },
    {
      start: Math.PI * 9 / 6,
      end: Math.PI * 11.95 / 6,
      color: '#F4B6BE',
      hoverColor: '#6699FF',
      isHover: false,
      text: "Starke Markenfuhrung"
    }
  ];

  const canvas = document.getElementById('lukaCircularCanvas');
  const ctx = canvas.getContext('2d');
  ctx.font = "bold 14px 'Arial', sans-serif"; // [font-style] [font-variant] [font-weight] font-size[/line-height] font-family
  ctx.textBaseline = 'middle';

  function drawArc(arc) {
    const radius = arc.isHover ? baseRadius + 10 : baseRadius;

    ctx.beginPath();
    ctx.arc(cx, cy, radius, arc.start, arc.end, false);
    ctx.arc(cx, cy, radius - thickness, arc.end, arc.start, true);
    ctx.closePath();

    ctx.fillStyle = arc.isHover ? arc.hoverColor : arc.color;
    ctx.fill();
  }

  function drawText(arc) {
    const radius = arc.isHover ? baseRadius - 10 : baseRadius - 30;
    const text = arc.text;
    const textLength = text.length;

    ctx.font = '14px Arial';
    ctx.fillStyle = 'white';
    ctx.textBaseline = 'middle';

    for(let i = 0; i < textLength; i++) {
      const char = text[i];
      
      const angle = arc.start + i * anglePerChar;
      
      const x = cx + radius * Math.cos(angle);
      const y = cy + radius * Math.sin(angle);
      
      ctx.save();
      
      ctx.translate(x, y);
      ctx.rotate(angle + Math.PI / 2);
      
      ctx.fillText(char, 0, 0);
      
      ctx.restore();
    }
  }

  function drawArcWithText() {

  }

  function drawAllArcs() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    
    ctx.font = '14px Arial';
    ctx.textBaseline = 'middle';

    let angle = 0;

    for(let i = 0; i < outerStrings.length ; i ++) {
      const text = outerStrings[i];

      for(let j = 0; j < text.length; j++) {
        const char = text[j];

        angle += outerAnglePerChar;

        const x = cx + (outerRadius - outerThickness / 2) * Math.cos(angle);
        const y = cy + (outerRadius - outerThickness / 2) * Math.sin(angle);

        ctx.fillStyle = '#87603A';

        ctx.save();

        ctx.translate(x, y);
        ctx.rotate(angle + Math.PI / 2);

        ctx.fillText(char, 0, 0);
      
        ctx.restore();
      }

      ctx.beginPath();
      ctx.arc(cx, cy, outerRadius, angle + outerArcAngle * 2 / 5, angle + outerArcAngle, false);
      ctx.arc(cx, cy, outerRadius - outerThickness, angle + outerArcAngle, angle + outerArcAngle * 2 / 5, true);
      ctx.closePath();

      ctx.fillStyle = '#F6EDDE';
      ctx.fill();

      angle += outerArcAngle;
    }

    arcs.forEach(drawArc);
    arcs.forEach(drawText);
  
  }

    

  function isPointInArc(mx, my, arc) {
    const dx = mx - cx;
    const dy = my - cy;
    const dist = Math.sqrt(dx * dx + dy * dy);
    const radius = baseRadius;

    if (dist < radius && dist > radius - thickness) {
      let angle = Math.atan2(dy, dx);
      if (angle < 0) angle += Math.PI * 2;

      if (angle >= arc.start && angle <= arc.end) {
        return true;
      }
    }
    return false;
  }

  canvas.addEventListener('mousemove', (e) => {
    const rect = canvas.getBoundingClientRect();
    const mx = e.clientX - rect.left;
    const my = e.clientY - rect.top;

    let changed = false;

    arcs.forEach(arc => {
      const wasHover = arc.isHover;
      arc.isHover = isPointInArc(mx, my, arc);
      if (arc.isHover !== wasHover) changed = true;
    });

    if (changed) drawAllArcs();
  });

  drawAllArcs();
</script>

</body>
</html>

